<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>▒▒▒▒ BLACK DICE ▒▒▒▒</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo" id="black-dice-logo">▒ BLACK DICE ▒</div>
        <nav>
            <ul id="nav-menu">
                <li><a href="#" id="home-btn">Início</a></li>
                <li><a href="#" class="btn login" id="login-btn">ENTRAR</a></li>
                <li><a href="#" class="btn signup" id="signup-btn">CADASTRAR</a></li>
            </ul>
            <ul id="user-info" style="display: none;">
                <li><a href="#" id="live-casino-sidebar">Cassino Ao Vivo</a></li>
                <li><a href="#" id="slots-sidebar">Slots</a></li>
                <li><a href="#" id="sports-sidebar">Esportes</a></li>
                <li><span id="user-name"></span>, <span id="user-balance"></span></li>
                <li><a href="#" class="btn" id="depositar-btn">DEPOSITAR</a></li>
                <li><a href="#" class="btn" id="saque-pix-link">SAQUE</a></li>
                <li><a href="#" class="btn" id="logout-btn">SAIR</a></li>
            </ul>
        </nav>
    </header>
    <div class="container">
        <aside class="sidebar">
            <div class="chat-board">
                <div class="online-count" id="online-count">ONLINE: 0 Pessoa(s)</div>
                <div class="chat-messages" id="chat-messages"></div>
                <div class="chat-input-container">
                    <input type="text" id="chat-input" placeholder="Digite..." maxlength="100">
                    <button id="chat-send" class="btn">ENTER</button>
                </div>
            </div>
            <ul>
                <li><a href="#" id="black-dice">Black Dice</a></li>
                <li><a href="#" id="bonus">Bônus</a></li>
                <li><a href="#" id="suporte">Suporte</a></li>
                <li><a href="#" id="suporte-ao-vivo">Suporte Ao Vivo</a></li>
                <li><a href="#" id="promocoes">Promoções</a></li>
                <li><a href="#" id="indique-um-amigo">Indique Um Amigo</a></li>
                <li><a href="#" id="patrocinios">Patrocínios</a></li>
            </ul>
        </aside>
        <main id="main-content">
            <section class="banner" id="banner-section">
                <div class="banner-content">
                    <h1>Promoção Imperdível!</h1>
                    <p>Ganhe até 500% de bônus!</p>
                    <a href="#" class="btn play-now" id="jogar-agora">Jogar Agora</a>
                </div>
            </section>
            <section class="iframe-container" id="iframe-container" style="display: none;">
                <iframe id="game-iframe" width="100%" height="600px" src="" frameborder="0"></iframe>
            </section>
            <section class="games" id="popular-games">
                <h2>Jogos Populares</h2>
                <div class="games-grid"></div>
            </section>
            <section class="live-casino" id="live-casino-games" style="display: none;">
                <h2>Cassino Ao Vivo</h2>
                <div class="games-grid"></div>
            </section>
            <section class="slots" id="slots-games" style="display: none;">
                <h2>Slots</h2>
                <div class="games-grid"></div>
            </section>
            <section class="sports" id="sports-games" style="display: none;">
                <h2>Esportes</h2>
                <div class="games-grid"></div>
            </section>
            <section class="content" id="content-section" style="display: none;">
                <h2 id="content-title"></h2>
                <h3 id="content-slogan"></h3>
                <p id="content-description"></p>
            </section>
            <section class="dice-game" id="dice-game-section" style="display: none;">
                <div class="dice-game-board" id="dice-game-board">
                    <div class="dice-timer" id="dice-timer">15</div>
                    <div class="dice-result" id="dice-result"></div>
                    <div class="dice-text" id="dice-text"></div>
                    <input type="number" id="bet-amount" placeholder="Enter bet amount" min="1">
                    <button id="par-bet-btn" class="btn">PAR</button>
                    <button id="inpar-bet-btn" class="btn">INPAR</button>
                </div>
            </section>
        </main>
        <main id="form-content" style="display: none;">
            <div class="form-container">
                <form id="login-form">
                    <h2>Entrar</h2>
                    <div class="form-group">
                        <label for="loginEmail">Email:</label>
                        <input type="email" id="loginEmail" name="loginEmail" required maxlength="50">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Senha:</label>
                        <input type="password" id="loginPassword" name="loginPassword" required maxlength="20">
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="btn login" id="loginButton">Entrar</button>
                        <button type="button" class="btn signup" id="show-signup-form">Cadastrar</button>
                    </div>
                </form>
                <form id="signup-form" method="POST" action="signup.php" style="display: none;">
                    <h2>Cadastrar</h2>
                    <div class="form-group">
                        <label for="signupName">Nome:</label>
                        <input type="text" id="signupName" name="signupName" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPix">PIX:</label>
                        <input type="text" id="signupPix" name="signupPix" required>
                    </div>
                    <div class="form-group">
                        <label for="signupCPF">CPF:</label>
                        <input type="text" id="signupCPF" name="signupCPF" required>
                    </div>
                    <div class="form-group">
                        <label for="signupDOB">Data de Nascimento:</label>
                        <input type="date" id="signupDOB" name="signupDOB" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email:</label>
                        <input type="email" id="signupEmail" name="signupEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPhone">Telefone:</label>
                        <input type="tel" id="signupPhone" name="signupPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Senha:</label>
                        <input type="password" id="signupPassword" name="signupPassword" required maxlength="20">
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="btn signup" id="signupButton">Cadastrar</button>
                        <button type="button" class="btn login" id="show-login-form">Entrar</button>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <div id="deposit-modal" class="modal">
        <div class="modal-content">
            <div class="logo">BLACK DICE</div>
            <button class="modal-close-btn" id="deposit-modal-close-btn">X</button>
            <div class="modal-body">
                <label for="deposit-amount">Digite o valor:</label>
                <input type="number" id="deposit-amount" maxlength="20">
                <button id="btn-60" class="btn">60</button>
                <button id="btn-240" class="btn">240</button>
                <button id="btn-600" class="btn">600</button>
                <button id="btn-digitar" class="btn">Digitar</button>
                <button id="generate-code-btn" class="btn">GERAR CODIGO</button>
                <img id="loading-gif" src="assets/img/loading.gif" alt="Loading" style="display: none;">
                <div id="generated-content" style="display: none;">
                    <img id="pix-img" src="" alt="PIX Image">
                    <p id="codigo-numero"></p>
                    <button id="copy-btn" class="btn">Copiar</button>
                </div>
            </div>
        </div>
    </div>
    <div id="saque-modal" class="modal">
        <div class="modal-content">
            <div class="logo">BLACK DICE</div>
            <button class="modal-close-btn" id="saque-modal-close-btn">X</button>
            <div class="modal-body">
                <h2>Parabéns!</h2>
                <p>Você ganhou!</p>
                <p>Nome: <span id="saque-nome"></span></p>
                <p>CPF: <span id="saque-cpf"></span></p>
                <p>PIX: <span id="saque-pix"></span></p>
                <p>BALANCE: <span id="saque-balance"></span> BRL</p>
                <label for="saque-amount">Digite o valor:</label>
                <input type="number" id="saque-amount" maxlength="20" style="font-size: 10px;">
                <button id="saque-confirm-btn" class="btn">Saque</button>
                <button id="close-saque-popup" class="btn">Fechar</button>
            </div>
        </div>
    </div>
    <div id="alert" class="alert" style="display: none;">
        <div class="alert-content">
            <p>cadastro com sucesso!</p>
            <button id="close-alert" class="btn">Confirmar</button>
        </div>
    </div>
    <footer class="fixed-footer">
        <div class="footer-btns">
            <button id="menu-btn" class="btn">Menu</button>
            <button id="pesquisa-btn" class="btn">Pesquisa</button>
            <div class="logo">▒ BLACK DICE ▒</div>
            <button id="chat-btn" class="btn">Chat</button>
            <button id="user-btn" class="btn">ENTRAR</button>
        </div>
    </footer>
    <footer class="footer-content">
        <p>Suporte: <a href="mailto:support@blackdice.com">support@blackdice.com</a> | 
        Parceiros: <a href="mailto:partners@blackdice.com">partners@blackdice.com</a> | 
        Jurídico: <a href="mailto:legal@blackdice.com">legal@blackdice.com</a> | 
        Imprensa: <a href="mailto:press@blackdice.com">press@blackdice.com</a></p>
        <p>&copy; 2024 Black Dice. Todos os direitos reservados.</p>
        <p>A Prolific Trade N.V. é licenciada e regulamentada pela Antillephone N.V, sob a licença nº 8048/JAZ2024-009</p>
        <p>A Black Dice aceita apenas clientes com mais de 18 anos de idade. Apostar pode ser viciante. Jogue responsavelmente.</p>
    </footer>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-analytics.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, updateDoc, where, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDO6_37Leg8EdVFTreP9V_xweJO3fa-UjQ",
            authDomain: "black-dice-bk.firebaseapp.com",
            projectId: "black-dice-bk",
            storageBucket: "black-dice-bk.appspot.com",
            messagingSenderId: "261104150179",
            appId: "1:261104150179:web:ad2a65de446da3a7f6c116",
            measurementId: "G-V1GKN9GFWN"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const auth = getAuth();
        const db = getFirestore(app);

        const mainContent = document.getElementById("main-content");
        const formContent = document.getElementById("form-content");
        const loginForm = document.getElementById("login-form");
        const signupForm = document.getElementById("signup-form");
        const iframeContainer = document.getElementById("iframe-container");
        const gameIframe = document.getElementById("game-iframe");
        const bannerSection = document.getElementById("banner-section");

        const homeBtn = document.getElementById("home-btn");
        const loginBtn = document.getElementById("login-btn");
        const signupBtn = document.getElementById("signup-btn");
        const showSignupFormBtn = document.getElementById("show-signup-form");
        const showLoginFormBtn = document.getElementById("show-login-form");

        const liveCasinoSidebar = document.getElementById("live-casino-sidebar");
        const slotsSidebar = document.getElementById("slots-sidebar");
        const sportsSidebar = document.getElementById("sports-sidebar");

        const blackDice = document.getElementById("black-dice");
        const bonus = document.getElementById("bonus");
        const suporte = document.getElementById("suporte");
        const suporteAoVivo = document.getElementById("suporte-ao-vivo");
        const promocoes = document.getElementById("promocoes");
        const indiqueUmAmigo = document.getElementById("indique-um-amigo");
        const patrocinios = document.getElementById("patrocinios");

        const navMenu = document.getElementById("nav-menu");
        const userInfo = document.getElementById("user-info");
        const userName = document.getElementById("user-name");
        const userBalance = document.getElementById("user-balance");

        const alertBox = document.getElementById("alert");
        const closeAlertBtn = document.getElementById("close-alert");

        const contentSection = document.getElementById("content-section");
        const contentTitle = document.getElementById("content-title");
        const contentSlogan = document.getElementById("content-slogan");
        const contentDescription = document.getElementById("content-description");

        const sections = {
            "black-dice": {
                title: "Black Dice",
                slogan: "O Melhor do Jogo",
                description: "Descubra a emoção dos nossos jogos exclusivos."
            },
            "bonus": {
                title: "Bônus",
                slogan: "Ganhe Mais",
                description: "Aproveite nossos bônus incríveis para aumentar suas chances de ganhar."
            },
            "suporte": {
                title: "Suporte",
                slogan: "Estamos Aqui Para Ajudar",
                description: "Nossa equipe de suporte está disponível 24/7 para assisti-lo."
            },
            "suporte-ao-vivo": {
                title: "Suporte Ao Vivo",
                slogan: "Ajuda Imediata",
                description: "Converse com nossa equipe de suporte ao vivo para resolver seus problemas instantaneamente."
            },
            "promocoes": {
                title: "Promoções",
                slogan: "Ofertas Imperdíveis",
                description: "Confira nossas promoções e ofertas especiais."
            },
            "indique-um-amigo": {
                title: "Indique Um Amigo",
                slogan: "Compartilhe a Diversão",
                description: "Indique um amigo e ganhe recompensas incríveis."
            },
            "patrocinios": {
                title: "Patrocínios",
                slogan: "Nossos Parceiros",
                description: "Conheça nossos parceiros e patrocinadores."
            }
        };

        function showContent(section) {
            const sectionData = sections[section];
            if (sectionData) {
                contentTitle.innerText = sectionData.title;
                contentSlogan.innerText = sectionData.slogan;
                contentDescription.innerText = sectionData.description;
                contentSection.style.display = "block";
                mainContent.style.display = "none";
                formContent.style.display = "none";
                iframeContainer.style.display = "none";
                bannerSection.style.display = "none";
            }
        }

        closeAlertBtn.addEventListener("click", () => {
            alertBox.style.display = "none";
        });

        homeBtn.addEventListener("click", function() {
            mainContent.style.display = "block";
            contentSection.style.display = "none";
            formContent.style.display = "none";
            iframeContainer.style.display = "none";
            bannerSection.style.display = "block";
            document.getElementById("popular-games").style.display = "block";
            document.getElementById("live-casino-games").style.display = "none";
            document.getElementById("slots-games").style.display = "none";
            document.getElementById("sports-games").style.display = "none";
            generateGames('popular-games', 12);
        });

        loginBtn.addEventListener("click", function() {
            mainContent.style.display = "none";
            contentSection.style.display = "none";
            formContent.style.display = "flex";
            iframeContainer.style.display = "none";
            bannerSection.style.display = "none";
            loginForm.style.display = "block";
            signupForm.style.display = "none";
        });

        signupBtn.addEventListener("click", function() {
            mainContent.style.display = "none";
            contentSection.style.display = "none";
            formContent.style.display = "flex";
            iframeContainer.style.display = "none";
            bannerSection.style.display = "none";
            loginForm.style.display = "none";
            signupForm.style.display = "block";
        });

        showSignupFormBtn.addEventListener("click", function() {
            loginForm.style.display = "none";
            signupForm.style.display = "block";
        });

        showLoginFormBtn.addEventListener("click", function() {
            signupForm.style.display = "none";
            loginForm.style.display = "block";
        });

        document.getElementById('signupButton').addEventListener('click', (event) => {
            event.preventDefault();
            const signupEmail = document.getElementById('signupEmail').value;
            const signupPassword = document.getElementById('signupPassword').value;
            const signupName = document.getElementById('signupName').value;
            const signupPix = document.getElementById('signupPix').value;
            const signupCPF = document.getElementById('signupCPF').value;
            const signupDOB = document.getElementById('signupDOB').value;
            const signupPhone = document.getElementById('signupPhone').value;

            createUserWithEmailAndPassword(auth, signupEmail, signupPassword)
                .then((userCredential) => {
                    const user = userCredential.user;
                    // Save additional user information in the Firestore
                    const userRef = doc(db, "users", user.uid);
                    setDoc(userRef, {
                        name: signupName,
                        pix: signupPix,
                        cpf: signupCPF,
                        dob: signupDOB,
                        phone: signupPhone,
                        balance: 0 // Initialize balance
                    }).then(() => {
                        // Show alert and redirect to login form
                        alertBox.style.display = "block";
                        signupForm.style.display = "none";
                        loginForm.style.display = "block";
                    });
                })
                .catch((error) => {
                    console.error(error.code, error.message);
                });
        });

        document.getElementById('loginButton').addEventListener('click', (event) => {
            event.preventDefault();
            const loginEmail = document.getElementById('loginEmail').value;
            const loginPassword = document.getElementById('loginPassword').value;

            signInWithEmailAndPassword(auth, loginEmail, loginPassword)
                .then((userCredential) => {
                    const user = userCredential.user;
                    updateUserInfo(user);
                    // Redirect to home screen after login
                    homeBtn.click();
                })
                .catch((error) => {
                    console.error(error.code, error.message);
                });
        });

        document.getElementById('logout-btn').addEventListener('click', () => {
            signOut(auth).then(() => {
                navMenu.style.display = "flex";
                userInfo.style.display = "none";
            }).catch((error) => {
                console.error(error.code, error.message);
            });
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                updateUserInfo(user);
                updateOnlineCount();
            } else {
                navMenu.style.display = "flex";
                userInfo.style.display = "none";
                onlineCount.innerText = 'ONLINE: 0 Pessoa(s)';
            }
        });

        function updateUserInfo(user) {
            const userRef = doc(db, "users", user.uid);
            getDoc(userRef).then((docSnap) => {
                if (docSnap.exists()) {
                    const userData = docSnap.data();
                    userName.innerText = `${userData.name}`;
                    userBalance.innerText = `Saldo : ${userData.balance.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' })}`;
                    navMenu.style.display = "none";
                    userInfo.style.display = "flex";
                } else {
                    console.error("No such document!");
                }
            }).catch((error) => {
                console.error(error.code, error.message);
            });
        }

        function showLiveCasino() {
            mainContent.style.display = "block";
            contentSection.style.display = "none";
            formContent.style.display = "none";
            iframeContainer.style.display = "none";
            bannerSection.style.display = "none";
            document.getElementById("popular-games").style.display = "none";
            document.getElementById("live-casino-games").style.display = "block";
            document.getElementById("slots-games").style.display = "none";
            document.getElementById("sports-games").style.display = "none";
            generateGames('live-casino-games', 20);
        }

        function showSlots() {
            mainContent.style.display = "block";
            contentSection.style.display = "none";
            formContent.style.display = "none";
            iframeContainer.style.display = "none";
            bannerSection.style.display = "none";
            document.getElementById("popular-games").style.display = "none";
            document.getElementById("live-casino-games").style.display = "none";
            document.getElementById("slots-games").style.display = "block";
            document.getElementById("sports-games").style.display = "none";
            generateGames('slots-games', 20);
        }

        function showSports() {
            mainContent.style.display = "block";
            contentSection.style.display = "none";
            formContent.style.display = "none";
            iframeContainer.style.display = "none";
            bannerSection.style.display = "none";
            document.getElementById("popular-games").style.display = "none";
            document.getElementById("live-casino-games").style.display = "none";
            document.getElementById("slots-games").style.display = "none";
            document.getElementById("sports-games").style.display = "block";
            generateGames('sports-games', 20);
        }

        function generateGames(sectionId, count) {
            var section = document.getElementById(sectionId);
            var gamesGrid = section.querySelector('.games-grid');
            gamesGrid.innerHTML = '';

            var gameNames = [
                "Blackjack Classic", "Roleta Europeia", "Baccarat", "Poker Texas Hold'em", "Bingo", "Caça-níquel Megaways",
                "Craps", "Pôquer de Três Cartas", "Baccarat Ao Vivo", "Roleta Americana", "Blackjack VIP", "Dream Catcher",
                "Monopoly Live", "Mega Ball", "Sic Bo", "Dragon Tiger", "Jogo do Bicho", "Keno", "Roleta Francesa", "Blackjack Switch",
                "Stud Poker", "Casino Hold'em", "Double Ball Roulette", "Football Studio", "Lightning Dice", "Deal or No Deal",
                "Side Bet City", "Crazy Time", "Mega Wheel", "Cash or Crash", "Gonzo's Treasure Hunt", "Roulette Double Up",
                "Poker Omaha", "Baccarat Squeeze", "Pontoon", "Three Card Poker Prime", "Dragonara Roulette", "Auto Roulette",
                "Speed Baccarat", "No Commission Baccarat", "First Person Blackjack", "Caribbean Stud Poker", "Texas Hold'em Bonus",
                "Free Bet Blackjack", "Infinite Blackjack", "Blackjack Party", "Instant Roulette", "Double Exposure Blackjack",
                "European Poker Tour", "World Series of Poker", "PokerStars Live", "All American Poker", "Ultimate Texas Hold'em",
                "Let It Ride", "Pai Gow Poker", "Five Card Draw", "High Card Flush", "Razz Poker", "Chinese Poker", "Open Face Chinese Poker"
            ];

            for (var i = 0; i < count; i++) {
                var gameItem = document.createElement('div');
                gameItem.className = 'game-item';
                gameItem.innerHTML = `
                    <img src="image${i % 60 + 1}.png" alt="${gameNames[i % gameNames.length]}">
                    <h3>${gameNames[i % gameNames.length]}</h3>
                    <div class="game-buttons">
                        <a href="#" class="btn small play-now">Jogar Agora</a>
                        <a href="#" class="btn small">Demo</a>
                    </div>
                `;
                gamesGrid.appendChild(gameItem);
            }

            var playNowButtons = document.querySelectorAll(".play-now");
            playNowButtons.forEach(function(button) {
                button.addEventListener("click", function(event) {
                    event.preventDefault();
                    const videoSrc = "https://5cb650433a.icsobdjtjn.net/gs2c/playGame.do?key=token%3D6079b79a941b4b6ab3679e8ed3671fb2%60%7C%60symbol%3D460%60%7C%60technology%3DH5%60%7C%60platform%3DWEB%60%7C%60language%3Dpt%60%7C%60currency%3DBRL%60%7C%60cashierUrl%3Dhttps%3A%2F%2Fbr.1xbet.com%2Foffice%2Frecharge%2F%60%7C%60lobbyUrl%3Dhttps%3A%2F%2Fbr.1xbet.com%2Fcasino&ppkv=2&stylename=1xbet_sw&rcCloseUrl=https://br.1xbet.com/casino&isGameUrlApiCalled=true";
                    bannerSection.style.display = "none";
                    contentSection.style.display = "none";
                    formContent.style.display = "none";
                    mainContent.style.display = "none";
                    iframeContainer.style.display = "block";
                    gameIframe.src = videoSrc;

                    gameIframe.onload = function() {
                        setTimeout(function() {
                            var iframeDoc = gameIframe.contentDocument || gameIframe.contentWindow.document;
                            var betBoardWrapper = iframeDoc.querySelector(".betboard_desktop_wrapper.dndBetBoard.droppable-cancel.global_bb_shadow");
                            var userBalanceElement = document.getElementById("user-balance");

                            function decreaseBalance() {
                                var balance = parseFloat(userBalanceElement.innerText.replace('Saldo : ', '').replace(' BRL', '').replace(/\./g, '').replace(',', '.'));
                                balance -= 1;
                                userBalanceElement.innerText = 'Saldo : ' + balance.toLocaleString('pt-BR') + ' BRL';
                            }

                            function attachClickListeners() {
                                var paths = betBoardWrapper.querySelectorAll("path");
                                paths.forEach(function(path) {
                                    path.addEventListener("click", decreaseBalance);
                                });
                            }

                            if (betBoardWrapper) {
                                attachClickListeners();
                            } else {
                                var interval = setInterval(function() {
                                    betBoardWrapper = iframeDoc.querySelector(".betboard_desktop_wrapper.dndBetBoard.droppable-cancel.global_bb_shadow");
                                    if (betBoardWrapper) {
                                        attachClickListeners();
                                        clearInterval(interval);
                                    }
                                }, 1000);
                            }
                        }, 3000);
                    };
                });
            });
        }

        generateGames('popular-games', 12);
        generateGames('live-casino-games', 20);
        generateGames('slots-games', 20);
        generateGames('sports-games', 20);

        liveCasinoSidebar.addEventListener("click", function() {
            showLiveCasino();
        });

        slotsSidebar.addEventListener("click", function() {
            showSlots();
        });

        sportsSidebar.addEventListener("click", function() {
            showSports();
        });

        blackDice.addEventListener("click", function() {
            showContent("black-dice");
        });

        bonus.addEventListener("click", function() {
            showContent("bonus");
        });

        suporte.addEventListener("click", function() {
            showContent("suporte");
        });

        suporteAoVivo.addEventListener("click", function() {
            showContent("suporte-ao-vivo");
        });

        promocoes.addEventListener("click", function() {
            showContent("promocoes");
        });

        indiqueUmAmigo.addEventListener("click", function() {
            showContent("indique-um-amigo");
        });

        patrocinios.addEventListener("click", function() {
            showContent("patrocinios");
        });

        // Deposit functionality
        const depositBtn = document.getElementById('depositar-btn');
        const depositModal = document.getElementById('deposit-modal');
        const depositModalCloseBtn = document.getElementById('deposit-modal-close-btn');
        const generateCodeBtn = document.getElementById('generate-code-btn');
        const btn60 = document.getElementById('btn-60');
        const btn240 = document.getElementById('btn-240');
        const btn600 = document.getElementById('btn-600');
        const btnDigitar = document.getElementById('btn-digitar');
        const depositAmountInput = document.getElementById('deposit-amount');
        const loadingGif = document.getElementById('loading-gif');
        const generatedContent = document.getElementById('generated-content');
        const pixImg = document.getElementById('pix-img');
        const codigoNumero = document.getElementById('codigo-numero');
        const copyBtn = document.getElementById('copy-btn');

        depositBtn.addEventListener('click', () => {
            depositModal.style.display = 'flex';
        });

        depositModalCloseBtn.addEventListener('click', () => {
            depositModal.style.display = 'none';
        });

        generateCodeBtn.addEventListener('click', async () => {
            const user = auth.currentUser;
            const depositAmount = parseFloat(depositAmountInput.value);
            if (user && !isNaN(depositAmount) && depositAmount > 0) {
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    const newBalance = userData.balance + depositAmount;

                    loadingGif.style.display = 'block';
                    generatedContent.style.display = 'none';

                    setTimeout(async () => {
                        await addDoc(collection(db, 'depositopix'), {
                            nome: userData.name,
                            pix: userData.pix,
                            pix_deposito_solicitado: depositAmount,
                            saldo_anterior: userData.balance,
                            saldo_atualizado: newBalance,
                            status: 'pending',
                            timestamp: serverTimestamp()
                        });

                        loadingGif.style.display = 'none';
                        generatedContent.style.display = 'block';
                        pixImg.src = 'generated_pix_image_url'; // Replace with the actual image URL
                        codigoNumero.innerText = 'Generated Code'; // Replace with the actual code
                    }, 15000);
                }
            } else {
                alert('Insira um valor de depósito válido.');
            }
        });

        copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(codigoNumero.innerText).then(() => {
                copyBtn.innerText = 'Copiar Concluído';
            });
        });

        btn60.addEventListener('click', () => {
            openPixWindow('https://geradordepix.com/pagamento/xkGEzKfr');
        });

        btn240.addEventListener('click', () => {
            openPixWindow('https://geradordepix.com/pagamento/vnbMclNE');
        });

        btn600.addEventListener('click', () => {
            openPixWindow('https://geradordepix.com/pagamento/yBETjUdn');
        });

        btnDigitar.addEventListener('click', () => {
            depositAmountInput.focus();
        });

        function openPixWindow(url) {
            const newWindow = window.open(url, 'PIX Window', 'width=600,height=600');
            newWindow.onload = () => {
                newWindow.document.body.style.display = 'flex';
                newWindow.document.body.style.justifyContent = 'center';
                newWindow.document.body.style.alignItems = 'center';
            };
        }

        // Chat functionality
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        const chatSend = document.getElementById('chat-send');
        const onlineCount = document.getElementById('online-count');

        chatInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });

        chatSend.addEventListener('click', () => {
            sendMessage();
        });

        function sendMessage() {
            if (chatInput.value.trim() === '') return;

            const user = auth.currentUser;
            if (!user) {
                alert('Faça login na sua conta.');
                return;
            }

            const userDoc = getDoc(doc(db, 'users', user.uid)).then((userDoc) => {
                if (!userDoc.exists()) {
                    alert('usuário não encontrado.');
                    return;
                }

                const message = {
                    text: chatInput.value.trim(),
                    timestamp: serverTimestamp(),
                    username: userDoc.data().name
                };

                addDoc(collection(db, 'chat', 'general', 'messages'), message);
                chatInput.value = '';
            });
        }

        const q = query(collection(db, 'chat', 'general', 'messages'), orderBy('timestamp', 'asc'));

        onSnapshot(q, (snapshot) => {
            chatMessages.innerHTML = '';
            snapshot.forEach((doc) => {
                const msg = doc.data();
                const time = msg.timestamp.toDate();
                const timeString = time.getHours().toString().padStart(2, '0') + ':' + time.getMinutes().toString().padStart(2, '0');
                const msgDiv = document.createElement('div');
                msgDiv.textContent = `${msg.username}: ${msg.text} (${timeString})`;
                chatMessages.appendChild(msgDiv);

                const now = new Date();
                const messageTime = msg.timestamp.toDate();
                const timeDiff = now - messageTime;

                if (timeDiff > 1800000) { // 30 minutes
                    deleteDoc(doc.ref);
                }
            });

            chatMessages.scrollTop = chatMessages.scrollHeight;
        });

        // Online user count
        function updateOnlineCount() {
            const onlineQuery = query(collection(db, 'users'), where('online', '==', true));
            onSnapshot(onlineQuery, (snapshot) => {
                const onlineUsers = snapshot.size;
                onlineCount.innerText = `ONLINE: ${onlineUsers} Pessoa(s)`;
            });
        }

        // Update user online status
        onAuthStateChanged(auth, (user) => {
            if (user) {
                const userRef = doc(db, 'users', user.uid);
                updateDoc(userRef, { online: true });

                window.addEventListener('beforeunload', () => {
                    updateDoc(userRef, { online: false });
                });
            }
        });

        // Saque PIX Popup
        const saquePixLink = document.getElementById('saque-pix-link');
        const saqueModal = document.getElementById('saque-modal');
        const saqueModalCloseBtn = document.getElementById('saque-modal-close-btn');
        const closeSaquePopupButton = document.getElementById('close-saque-popup');
        const saqueNome = document.getElementById('saque-nome');
        const saqueCpf = document.getElementById('saque-cpf');
        const saquePix = document.getElementById('saque-pix');
        const saqueBalance = document.getElementById('saque-balance');
        const saqueAmount = document.getElementById('saque-amount');
        const saqueConfirmBtn = document.getElementById('saque-confirm-btn');

        saquePixLink.addEventListener('click', function(event) {
            event.preventDefault();
            const user = auth.currentUser;
            if (user) {
                getDoc(doc(db, 'users', user.uid)).then((userDoc) => {
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        saqueNome.innerText = userData.name;
                        saqueCpf.innerText = userData.cpf;
                        saquePix.innerText = userData.pix;
                        saqueBalance.innerText = userData.balance;
                        saqueModal.style.display = 'flex';
                    }
                });
            }
        });

        saqueModalCloseBtn.addEventListener('click', function() {
            saqueModal.style.display = 'none';
        });

        closeSaquePopupButton.addEventListener('click', function() {
            saqueModal.style.display = 'none';
        });

        saqueConfirmBtn.addEventListener('click', function() {
            const user = auth.currentUser;
            if (user) {
                getDoc(doc(db, 'users', user.uid)).then((userDoc) => {
                    if (userDoc.exists()) {
                        const userData = userDoc.data();
                        const saqueValue = parseFloat(saqueAmount.value);
                        const newBalance = userData.balance - saqueValue;

                        if (newBalance >= 0) {
                            updateDoc(doc(db, 'users', user.uid), { balance: newBalance }).then(() => {
                                addDoc(collection(db, 'saquepix'), {
                                    nome: userData.name,
                                    cpf: userData.cpf,
                                    pix: userData.pix,
                                    pix_saque_solicitado: saqueValue,
                                    saldo_anterior: userData.balance,
                                    saldo_atualizado: newBalance
                                }).then(() => {
                                    saqueBalance.innerText = newBalance.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
                                    alert('Saque realizado com sucesso!');
                                    saqueModal.style.display = 'none';
                                });
                            });
                        } else {
                            alert('Saldo insuficiente.');
                        }
                    }
                });
            }
        });

        // Dice game functionality
        const diceGameLogo = document.querySelector('.logo');
        const diceGameUrl = 'dicegame.html'; // URL for the dice game page

        diceGameLogo.addEventListener('click', () => {
            window.open(diceGameUrl, 'Dice Game', 'width=800,height=600');
        });

        const jogarAgoraBtn = document.getElementById('jogar-agora');

        jogarAgoraBtn.addEventListener('click', function() {
            const iframeUrl = 'https://5cb650433a.icsobdjtjn.net/gs2c/playGame.do?key=token%3D6079b79a941b4b6ab3679e8ed3671fb2%60%7C%60symbol%3D460%60%7C%60technology%3DH5%60%7C%60platform%3DWEB%60%7C%60language%3Dpt%60%7C%60currency%3DBRL%60%7C%60cashierUrl%3Dhttps%3A%2F%2Fbr.1xbet.com%2Foffice%2Frecharge%2F%60%7C%60lobbyUrl%3Dhttps%3A%2F%2Fbr.1xbet.com%2Fcasino&ppkv=2&stylename=1xbet_sw&rcCloseUrl=https://br.1xbet.com/casino&isGameUrlApiCalled=true';

            const iframeBox = document.createElement('div');
            iframeBox.id = 'iframe-box';
            iframeBox.style.position = 'fixed';
            iframeBox.style.top = '50%';
            iframeBox.style.left = '50%';
            iframeBox.style.transform = 'translate(-50%, -50%)';
            iframeBox.style.width = '80%';
            iframeBox.style.height = '80%';
            iframeBox.style.backgroundColor = '#000';
            iframeBox.style.zIndex = '1000';
            iframeBox.style.display = 'flex';
            iframeBox.style.flexDirection = 'column';
            iframeBox.style.alignItems = 'center';
            iframeBox.style.justifyContent = 'center';

            const closeBtn = document.createElement('button');
            closeBtn.innerText = 'X';
            closeBtn.style.alignSelf = 'flex-end';
            closeBtn.style.margin = '10px';
            closeBtn.style.padding = '5px 10px';
            closeBtn.style.backgroundColor = '#e50914';
            closeBtn.style.color = '#fff';
            closeBtn.style.border = 'none';
            closeBtn.style.borderRadius = '5px';
            closeBtn.style.cursor = 'pointer';

            closeBtn.addEventListener('click', () => {
                iframeBox.remove();
            });

            const iframe = document.createElement('iframe');
            iframe.src = iframeUrl;
            iframe.style.width = '100%';
            iframe.style.height = '90%';
            iframe.style.border = 'none';

            iframeBox.appendChild(closeBtn);
            iframeBox.appendChild(iframe);

            document.body.appendChild(iframeBox);
        });

    </script>
</body>
</html>
